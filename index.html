<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iRock</title>
    <link rel="stylesheet" href="style.css">
    <script>
        function parseDonuts(donutString){
            numDonuts = parseInt(donutString);
            if (donutString.indexOf("duzia") != -1)
                numDonuts *=12;
            return numDonuts;
        }
        function updateOrder(){
            const TAX = 0.05;
            const PRECODONUT = 2;
            var numDonutBolo = parseDonuts(document.getElementById("donutbolo").value);
            var numDonutSimples = parseDonuts(document.getElementById("donutsimples").value);
            
            if(isNaN(numDonutBolo))
                numDonutBolo = 0;
            if(isNaN(numDonutSimples))
                numDonutSimples = 0;

            var nome = document.getElementById("nome").value;
            var tempo = parseInt(document.getElementById("tempo").value);
            var total = (numDonutBolo + numDonutSimples) * PRECODONUT;
            

            resultado.innerHTML = `O valor está <em>R$${total}</em>`;
        }
        function placeOrder(){
            
            if (document.getElementById("nome").value == "")
            alert("Você precisa fornecer um nome antes de enviar o pedido.");

            else if (isNaN (tempo)||(tempo == ""))
            
            alert("Você deve fornercer o número de minutos até a coleta antes de enviar o pedido.");
            
            else form.submit();
        }
    </script>
</head>

<body>
    <div id="frame">
        <form name="orderform" action="donuts.php" method="POST">
            <div class="field">
                Seu nome: <input type="text" name="nome" id="nome" value="" onchange="updateOrder();">
            </div>
            <div class="field">
                # de donuts de bolo: <input type="text" name="donutbolo" id="donutbolo" value="" onchange="updateOrder();">
            </div>
            <div class="field">
                # de donuts de simples: <input type="text" name="donutsimples" id="donutsimples" value="" onchange="updateOrder();"> 
            </div>
            <div class="field">
                Horas que irá buscar: <input type="text" name="tempo" id="tempo" value="" onchange="updateOrder();">
            </div>
            
            <div class="subTotal" name="subTotal" id="subTotal" value="">
            </div>
            <div class="resultado" name= "resultado" id="resultado">

            </div>
            
            <div class="field">
                <input type="button" value="Place Order" onclick="placeOrder();">
            </div>
        </form>
    </div>
</body>
</html>
